<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‹±å˜èªã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã‚²ãƒ¼ãƒ  - ELEMENT Lesson 3-6</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 800px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 30px;
            font-size: 28px;
        }

        .setup-screen, .game-screen, .result-screen {
            display: none;
        }

        .setup-screen.active, .game-screen.active, .result-screen.active {
            display: block;
        }

        .option-group {
            margin-bottom: 30px;
        }

        .option-group h2 {
            color: #333;
            font-size: 20px;
            margin-bottom: 15px;
        }

        .hint-btn {
            background: #fbbf24;
            border-color: #fbbf24;
            color: white;
            margin-bottom: 20px;
        }

        .hint-btn:hover {
            background: #f59e0b;
            border-color: #f59e0b;
        }

        .hint-box {
            background: #fef3c7;
            border: 2px solid #fbbf24;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
            display: none;
        }

        .hint-box.visible {
            display: block;
        }

        .hint-text {
            color: #92400e;
            font-size: 16px;
        }

        .word-count {
            display: inline-block;
            background: rgba(255,255,255,0.3);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            margin-top: 10px;
        }

        .button-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        button {
            padding: 15px 30px;
            font-size: 16px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        button:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102,126,234,0.3);
        }

        button.selected {
            background: #667eea;
            color: white;
        }

        button.start-btn {
            width: 100%;
            background: #667eea;
            color: white;
            font-size: 20px;
            padding: 20px;
            margin-top: 20px;
        }

        button.start-btn:hover {
            background: #5568d3;
        }

        .game-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            padding: 20px;
            background: #f5f5f5;
            border-radius: 10px;
        }

        .info-item {
            text-align: center;
        }

        .info-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }

        .info-value {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        .question-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .question-number {
            font-size: 16px;
            margin-bottom: 10px;
            opacity: 0.9;
        }

        .question-text {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .question-hint {
            font-size: 16px;
            opacity: 0.8;
        }

        .answer-input {
            width: 100%;
            padding: 20px;
            font-size: 24px;
            border: 3px solid #667eea;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
            transition: all 0.3s;
        }

        .answer-input:focus {
            outline: none;
            border-color: #764ba2;
            box-shadow: 0 0 20px rgba(102,126,234,0.3);
        }

        .answer-input.correct {
            border-color: #48bb78;
            background: #f0fff4;
        }

        .answer-input.incorrect {
            border-color: #f56565;
            background: #fff5f5;
        }

        .feedback {
            text-align: center;
            font-size: 18px;
            margin-bottom: 20px;
            min-height: 30px;
            font-weight: bold;
        }

        .feedback.correct {
            color: #48bb78;
        }

        .feedback.incorrect {
            color: #f56565;
        }

        .result-screen {
            text-align: center;
        }

        .result-time {
            font-size: 64px;
            font-weight: bold;
            color: #667eea;
            margin: 30px 0;
        }

        .result-stats {
            background: #f5f5f5;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid #ddd;
        }

        .stat-row:last-child {
            border-bottom: none;
        }

        .stat-label {
            font-size: 18px;
            color: #666;
        }

        .stat-value {
            font-size: 20px;
            font-weight: bold;
            color: #667eea;
        }

        .score-display {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin: 30px 0;
        }

        .score-number {
            font-size: 48px;
            font-weight: bold;
            margin: 10px 0;
        }

        .name-input-section {
            margin: 30px 0;
        }

        .name-input {
            width: 100%;
            padding: 15px;
            font-size: 18px;
            border: 2px solid #667eea;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 15px;
        }

        .save-score-btn {
            width: 100%;
            background: #48bb78;
            border-color: #48bb78;
            color: white;
        }

        .save-score-btn:hover {
            background: #38a169;
            border-color: #38a169;
        }

        .ranking-link {
            margin-top: 20px;
            padding: 15px;
            background: #f7fafc;
            border-radius: 10px;
            text-align: center;
        }

        .ranking-screen {
            display: none;
        }

        .ranking-screen.active {
            display: block;
        }

        .ranking-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .ranking-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .ranking-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-size: 16px;
        }

        .ranking-table td {
            padding: 15px;
            border-bottom: 1px solid #e2e8f0;
            font-size: 16px;
        }

        .ranking-table tr:hover {
            background: #f7fafc;
        }

        .rank-medal {
            font-size: 24px;
            margin-right: 10px;
        }

        .rank-1 {
            background: #fef5e7;
        }

        .rank-2 {
            background: #f4f4f4;
        }

        .rank-3 {
            background: #fdf2e3;
        }

        .teacher-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .reset-btn {
            background: #f56565;
            border-color: #f56565;
            color: white;
        }

        .reset-btn:hover {
            background: #e53e3e;
            border-color: #e53e3e;
        }

        .back-btn {
            background: #718096;
            border-color: #718096;
            color: white;
        }

        .back-btn:hover {
            background: #4a5568;
            border-color: #4a5568;
        }

        .empty-ranking {
            text-align: center;
            padding: 60px 20px;
            color: #718096;
            font-size: 18px;
        }

        .qr-section {
            background: #f7fafc;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin: 30px 0;
        }

        .qr-code-container {
            display: inline-block;
            padding: 20px;
            background: white;
            border-radius: 10px;
            margin: 20px 0;
        }

        .submission-code {
            font-size: 32px;
            font-weight: bold;
            color: #667eea;
            letter-spacing: 5px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }

        .teacher-mode-btn {
            background: #ed8936;
            border-color: #ed8936;
            color: white;
            margin-top: 10px;
        }

        .teacher-mode-btn:hover {
            background: #dd6b20;
            border-color: #dd6b20;
        }

        .code-input-section {
            margin: 20px 0;
            padding: 20px;
            background: #f7fafc;
            border-radius: 10px;
        }

        .code-input {
            width: 300px;
            max-width: 100%;
            padding: 15px;
            font-size: 24px;
            border: 2px solid #667eea;
            border-radius: 10px;
            text-align: center;
            letter-spacing: 3px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
        }

        .submit-code-btn {
            background: #48bb78;
            border-color: #48bb78;
            color: white;
            padding: 15px 40px;
        }

        .submit-code-btn:hover {
            background: #38a169;
            border-color: #38a169;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e2e8f0;
            border-radius: 5px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s;
        }

        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 22px;
            }

            .question-text {
                font-size: 24px;
            }

            .answer-input {
                font-size: 18px;
            }

            .result-time {
                font-size: 48px;
            }

            button {
                padding: 12px 20px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>âš¡ è‹±å˜èªã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã‚²ãƒ¼ãƒ  âš¡</h1>

        <!-- ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ç”»é¢ -->
        <div class="setup-screen active">
            <div class="option-group">
                <h2>ğŸ“š å‡ºé¡Œãƒ¢ãƒ¼ãƒ‰</h2>
                <div class="button-group">
                    <button class="mode-btn selected" data-mode="words">å˜èªãƒ¢ãƒ¼ãƒ‰</button>
                    <button class="mode-btn" data-mode="phrases">ç†Ÿèªãƒ¢ãƒ¼ãƒ‰</button>
                </div>
            </div>

            <div class="option-group">
                <h2>ğŸ“ å‡ºé¡Œæ•°</h2>
                <div class="button-group">
                    <button class="count-btn" data-count="10">10å•</button>
                    <button class="count-btn selected" data-count="25">25å•</button>
                    <button class="count-btn" data-count="50">50å•</button>
                    <button class="count-btn" data-count="all">å…¨å•</button>
                </div>
            </div>

            <div class="option-group">
                <h2>ğŸ”„ å•é¡Œå½¢å¼</h2>
                <div class="button-group">
                    <button class="direction-btn selected" data-direction="ja-en">æ—¥æœ¬èª â†’ è‹±èª</button>
                    <button class="direction-btn" data-direction="en-ja">è‹±èª â†’ æ—¥æœ¬èª</button>
                </div>
            </div>

            <button class="start-btn">ã‚²ãƒ¼ãƒ ã‚¹ã‚¿ãƒ¼ãƒˆï¼</button>
            
            <div class="ranking-link">
                <button class="view-spreadsheet-btn" style="padding: 12px 30px; background: #48bb78; border-color: #48bb78; color: white;">ğŸ“Š ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã§çµæœã‚’è¦‹ã‚‹</button>
            </div>
        </div>

        <!-- ã‚²ãƒ¼ãƒ ç”»é¢ -->
        <div class="game-screen">
            <div class="progress-bar">
                <div class="progress-fill" style="width: 0%"></div>
            </div>

            <div class="game-info">
                <div class="info-item">
                    <div class="info-label">çµŒéæ™‚é–“</div>
                    <div class="info-value timer">00:00</div>
                </div>
                <div class="info-item">
                    <div class="info-label">å•é¡Œæ•°</div>
                    <div class="info-value progress">0/0</div>
                </div>
                <div class="info-item">
                    <div class="info-label">æ­£è§£æ•°</div>
                    <div class="info-value correct-count">0</div>
                </div>
            </div>

            <div class="question-card">
                <div class="question-number">å•é¡Œ 1</div>
                <div class="question-text">Loading...</div>
                <div class="question-hint"></div>
            </div>

            <button class="hint-btn">ğŸ’¡ ãƒ’ãƒ³ãƒˆã‚’è¦‹ã‚‹</button>
            <div class="hint-box">
                <div class="hint-text"></div>
            </div>

            <input type="text" class="answer-input" placeholder="ã“ã“ã«å…¥åŠ›ã—ã¦Enter" autocomplete="off">
            <div class="feedback"></div>
        </div>

        <!-- çµæœç”»é¢ -->
        <div class="result-screen">
            <h2 style="font-size: 32px; margin-bottom: 20px;">ğŸ‰ å®Œäº†ï¼ ğŸ‰</h2>
            <div class="result-time">00:00</div>
            
            <div class="score-display">
                <div style="font-size: 18px; margin-bottom: 10px;">ã‚ãªãŸã®ã‚¹ã‚³ã‚¢</div>
                <div class="score-number">0</div>
                <div style="font-size: 14px; opacity: 0.9;">ã‚¹ã‚³ã‚¢ = (æ­£è§£æ•° Ã— 100) - çµŒéç§’æ•°</div>
            </div>
            
            <div class="result-stats">
                <div class="stat-row">
                    <span class="stat-label">ç·å•é¡Œæ•°</span>
                    <span class="stat-value total-questions">0</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">æ­£è§£æ•°</span>
                    <span class="stat-value final-correct">0</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">æ­£è§£ç‡</span>
                    <span class="stat-value accuracy">0%</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">1å•ã‚ãŸã‚Šå¹³å‡æ™‚é–“</span>
                    <span class="stat-value avg-time">0ç§’</span>
                </div>
            </div>
            
            <div class="name-input-section">
                <h3 style="margin-bottom: 15px; color: #333;">ã‚ãªãŸã®åå‰ã‚’å…¥åŠ›</h3>
                <input type="text" class="name-input" placeholder="åå‰ã¾ãŸã¯ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã‚’å…¥åŠ›" maxlength="20">
                <button class="save-score-btn">æ¬¡ã¸é€²ã‚€</button>
            </div>
            
            <div class="qr-section" style="display: none;">
                <h3 style="color: #333; margin-bottom: 10px;">ğŸ“± å…ˆç”Ÿã«ã“ã®ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã›ã¦ãã ã•ã„</h3>
                <div class="submission-code"></div>
                <p style="color: #718096; font-size: 14px; margin-top: 10px;">
                    å…ˆç”ŸãŒã“ã®ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã«è¨˜éŒ²ã•ã‚Œã¾ã™
                </p>
            </div>
            
            <button class="start-btn" onclick="location.reload()">ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤</button>
        </div>
    </div>

    <script>
        // å˜èªãƒ‡ãƒ¼ã‚¿
        const wordsData = [
            {en: "happily", ja: "å¹¸ç¦ã«", def: "in a happy way", synonyms: []},
            {en: "assignment", ja: "ä»»å‹™", def: "a task or piece of work", synonyms: ["task"]},
            {en: "stamp", ja: "ï½ã«å°ã‚’æŠ¼ã™ï¼Œæºå°ã™ã‚‹", def: "to print letters using a special tool", synonyms: []},
            {en: "document", ja: "æ›¸é¡ï¼Œæ–‡æ›¸", def: "an official piece of paper", synonyms: []},
            {en: "bomber", ja: "çˆ†æ’ƒæ©Ÿ", def: "a plane that carries bombs", synonyms: []},
            {en: "parachute", ja: "ãƒ‘ãƒ©ã‚·ãƒ¥ãƒ¼ãƒˆ", def: "a device to fall slowly from aircraft", synonyms: []},
            {en: "unconscious", ja: "æ„è­˜ã‚’å¤±ã£ãŸï¼Œæ°—çµ¶ã—ãŸ", def: "not able to use your senses", synonyms: []},
            {en: "dazed", ja: "å‘†ç„¶ã¨ã—ãŸ", def: "unable to think clearly", synonyms: ["confused"]},
            {en: "recover", ja: "å›å¾©ã™ã‚‹", def: "to get well again", synonyms: []},
            {en: "pain", ja: "ç—›ã¿", def: "feeling when you are hurt", synonyms: []},
            {en: "mushroom", ja: "ã‚­ãƒã‚³", def: "a fungus with round flat head", synonyms: []},
            {en: "soar", ja: "é«˜ãä¸ŠãŒã‚‹ï¼Œèˆã„ä¸ŠãŒã‚‹", def: "to fly high in the sky", synonyms: []},
            {en: "colleague", ja: "åŒåƒš", def: "a person you work with", synonyms: ["coworker"]},
            {en: "survivor", ja: "ç”Ÿå­˜è€…", def: "person who continues to live after danger", synonyms: []},
            {en: "shelter", ja: "é¿é›£æ‰€ï¼Œé˜²ç©ºå£•", def: "structure for protection", synonyms: []},
            {en: "manage", ja: "ï½ã‚’ãªã‚“ã¨ã‹ã‚„ã‚Šé‚ã’ã‚‹", def: "to succeed in doing something difficult", synonyms: []},
            {en: "treatment", ja: "æ²»ç™‚", def: "medical procedure to cure illness", synonyms: []},
            {en: "heavily", ja: "éå¸¸ã«ï¼›å¤§é‡ã«", def: "to a great degree", synonyms: []},
            {en: "bandage", ja: "ï½ã«åŒ…å¸¯ã‚’ã™ã‚‹", def: "to wrap cloth around injury", synonyms: []},
            {en: "stunned", ja: "å”–ç„¶ã¨ã—ã¦", def: "too surprised to speak", synonyms: ["shocked"]},
            {en: "totally", ja: "ã¾ã£ãŸãï¼Œã™ã£ã‹ã‚Š", def: "completely", synonyms: ["completely", "entirely"]},
            {en: "boss", ja: "ä¸Šå¸", def: "person in charge at work", synonyms: []},
            {en: "absolutely", ja: "çµ¶å¯¾ï¼Œå®Œå…¨ã«", def: "used to emphasize something", synonyms: ["completely"]},
            {en: "impossible", ja: "ã‚ã‚Šãˆãªã„ï¼›ä¸å¯èƒ½ãª", def: "not possible", synonyms: []},
            {en: "flash", ja: "é–ƒãï¼Œé–ƒå…‰", def: "sudden bright light", synonyms: []},
            {en: "alive", ja: "ç”Ÿãã¦ã„ã‚‹ï¼Œç”ŸããŸçŠ¶æ…‹ã§", def: "living; not dead", synonyms: ["living"]},
            {en: "fate", ja: "é‹å‘½", def: "things that happen to someone", synonyms: ["destiny"]},
            {en: "suffer", ja: "è‹¦ã—ã‚€ï¼Œæ‚©ã‚€", def: "to experience pain", synonyms: []},
            {en: "physically", ja: "è‚‰ä½“çš„ã«", def: "relating to your body", synonyms: []},
            {en: "mentally", ja: "ç²¾ç¥çš„ã«", def: "relating to your mind", synonyms: []},
            {en: "bombing", ja: "çˆ†æ’ƒ", def: "use of bombs to attack", synonyms: []},
            {en: "after-effect", ja: "å¾Œéºç—‡", def: "bad effect continuing long time", synonyms: []},
            {en: "eventually", ja: "ã¤ã„ã«ï¼Œã‚„ãŒã¦", def: "after a long time", synonyms: ["finally"]},
            {en: "destiny", ja: "é‹å‘½", def: "things that will happen", synonyms: ["fate"]},
            {en: "duty", ja: "ç¾©å‹™", def: "something you must do", synonyms: []},
            {en: "painful", ja: "ã¤ã‚‰ã„ï¼Œè‹¦ç—›ãª", def: "causing you pain", synonyms: []},
            {en: "sincerely", ja: "å¿ƒã‹ã‚‰ï¼Œæœ¬å½“ã«", def: "in a way you strongly feel", synonyms: []},
            {en: "nuclear", ja: "åŸå­åŠ›ã®ï¼Œæ ¸å…µå™¨ã®", def: "relating to nuclear energy", synonyms: []},
            {en: "pause", ja: "ä¼‘æ­¢ï¼Œçµ¶ãˆé–“", def: "short time of stopping", synonyms: ["break"]},
            {en: "quietly", ja: "é™ã‹ã«", def: "without making noise", synonyms: []},
            {en: "completely", ja: "å®Œå…¨ã«ï¼Œå¾¹åº•çš„ã«", def: "to the greatest degree", synonyms: ["totally", "entirely"]},
            {en: "crazy", ja: "ç†±ä¸­ã—ã¦ã„ã‚‹ï¼›æ­£æ°—ã§ãªã„", def: "very enthusiastic about something", synonyms: []},
            {en: "cheer", ja: "å£°æ´ã‚’é€ã‚‹", def: "to shout showing support", synonyms: []},
            {en: "historic", ja: "æ­´å²çš„ã«æœ‰åãª", def: "very important in history", synonyms: []},
            {en: "league", ja: "ç«¶æŠ€é€£ç›Ÿï¼Œãƒªãƒ¼ã‚°", def: "group of sports teams", synonyms: []},
            {en: "pitcher", ja: "æŠ•æ‰‹", def: "player who throws ball", synonyms: []},
            {en: "pitch", ja: "ï½ã‚’æŠ•ã’ã‚‹", def: "to throw a ball", synonyms: ["throw"]},
            {en: "opposing", ja: "å¯¾ç«‹ã™ã‚‹ï¼Œåå¯¾ã®", def: "on the other team", synonyms: []},
            {en: "batter", ja: "æ‰“è€…", def: "person trying to hit ball", synonyms: []},
            {en: "expect", ja: "ï½ã‚’äºˆæœŸã™ã‚‹", def: "to think something will happen", synonyms: []},
            {en: "brief", ja: "çŸ­æ™‚é–“ã®", def: "continuing for short time", synonyms: ["short"]},
            {en: "teammate", ja: "ãƒãƒ¼ãƒ ãƒ¡ã‚¤ãƒˆ", def: "someone on same team", synonyms: []},
            {en: "umpire", ja: "å¯©åˆ¤å“¡", def: "person who enforces rules", synonyms: ["referee"]},
            {en: "locker", ja: "ãƒ­ãƒƒã‚«ãƒ¼", def: "small cupboard with lock", synonyms: []},
            {en: "replay", ja: "ãƒªãƒ—ãƒ¬ã‚¤", def: "playing again of sports event", synonyms: []},
            {en: "devastated", ja: "æ‰“ã¡ã²ã—ãŒã‚ŒãŸ", def: "extremely shocked and sad", synonyms: []},
            {en: "slump", ja: "ãƒ‰ã‚¹ãƒ³ã¨è½ã¡ã‚‹ï¼»å€’ã‚Œã‚‹ï¼½", def: "to fall because not strong", synonyms: []},
            {en: "dozen", ja: "12å€‹ï¼Œãƒ€ãƒ¼ã‚¹", def: "twelve", synonyms: []},
            {en: "admit", ja: "ï½ã‚’èªã‚ã‚‹", def: "to say something is true", synonyms: ["acknowledge"]},
            {en: "apologize", ja: "è¬ç½ªã™ã‚‹ï¼Œè¬ã‚‹", def: "to say you are sorry", synonyms: []},
            {en: "veteran", ja: "è€ç·´ãªï¼Œè€å·§ãª", def: "having much experience", synonyms: ["experienced"]},
            {en: "forth", ja: "å‰ã¸ï¼Œå¤–ã¸", def: "going out from a place", synonyms: []},
            {en: "hug", ja: "æŠ±æ“", def: "holding someone tightly", synonyms: ["embrace"]},
            {en: "stuff", ja: "ï¼ˆç‰¹å®šã®ã‚‚ã®ã‚’æŒ‡ã•ãªã„ï¼Œæ¼ ç„¶ã¨ã—ãŸï¼‰ã‚‚ã®", def: "things or activities", synonyms: ["things"]},
            {en: "calmly", ja: "å†·é™ã«ï¼Œé™ã‹ã«", def: "in a relaxed way", synonyms: []},
            {en: "exchange", ja: "ï½ã‚’äº¤æ›ã™ã‚‹", def: "to give and receive", synonyms: []},
            {en: "lineup", ja: "ï¼ˆé¸æ‰‹ã®ï¼‰é™£å®¹", def: "positions of players", synonyms: []},
            {en: "crowd", ja: "äººæ··ã¿ï¼Œè¦³è¡†", def: "large group of people", synonyms: []},
            {en: "award", ja: "è³", def: "prize given to someone", synonyms: ["prize"]},
            {en: "shortly", ja: "ã¾ã‚‚ãªãï¼Œã˜ãã«", def: "soon; in near future", synonyms: ["soon"]},
            {en: "founder", ja: "å‰µè¨­è€…", def: "someone who establishes organization", synonyms: []},
            {en: "literature", ja: "æ–‡å­¦", def: "books and poems of high quality", synonyms: []},
            {en: "admire", ja: "ï½ã«æ„Ÿå¿ƒã™ã‚‹ï¼Œï½ã‚’ç§°è³›ã™ã‚‹", def: "to respect and like someone", synonyms: []},
            {en: "desperate", ja: "çµ¶æœ›çš„ãªï¼Œæ·±åˆ»ãª", def: "very bad or serious", synonyms: []},
            {en: "courage", ja: "å‹‡æ°—", def: "quality of being brave", synonyms: ["bravery"]},
            {en: "author", ja: "è‘—è€…", def: "someone who wrote a book", synonyms: ["writer"]},
            {en: "childhood", ja: "å­ã©ã‚‚æ™‚ä»£", def: "time when you are a child", synonyms: []},
            {en: "onomatopoeia", ja: "æ“¬éŸ³ï¼»æ…‹ï¼½èªï¼Œã‚ªãƒãƒãƒˆãƒš", def: "words that sound like what they describe", synonyms: []},
            {en: "calm", ja: "ï½ã‚’è½ã¡ç€ã‹ã›ã‚‹", def: "to make quiet and relaxed", synonyms: []},
            {en: "peach", ja: "æ¡ƒ", def: "round juicy fruit", synonyms: []},
            {en: "float", ja: "æµ®ãï¼Œæµ®ã‹ã¶", def: "to stay on liquid surface", synonyms: []},
            {en: "pleasant", ja: "æ¥½ã—ã„ï¼Œæ°—æŒã¡ã®ã‚ˆã„", def: "enjoyable and making happy", synonyms: []},
            {en: "rhythm", ja: "ãƒªã‚ºãƒ ", def: "regular pattern of sounds", synonyms: []},
            {en: "unconsciously", ja: "ç„¡æ„è­˜ã«", def: "without being aware", synonyms: []},
            {en: "magic", ja: "é­”æ³•", def: "power to make impossible happen", synonyms: []},
            {en: "spell", ja: "å‘ªæ–‡", def: "special words in magic", synonyms: []},
            {en: "everyday", ja: "æ¯æ—¥ã®", def: "ordinary or usual", synonyms: ["daily"]},
            {en: "imagination", ja: "æƒ³åƒåŠ›", def: "ability to form pictures in mind", synonyms: []},
            {en: "onomatopoeic", ja: "æ“¬éŸ³ï¼»æ…‹ï¼½èªã®ï¼Œã‚ªãƒãƒãƒˆãƒšã®", def: "relating to sound-describing words", synonyms: []},
            {en: "phrase", ja: "å¥ï¼Œæ…£ç”¨å¥", def: "group of words with meaning", synonyms: []},
            {en: "delightful", ja: "æ¥½ã—ã„ï¼Œæ„‰å¿«ãª", def: "very pleasant", synonyms: ["pleasant"]},
            {en: "beat", ja: "æ‰“ã¤ï¼Œé¼“å‹•ã™ã‚‹", def: "to make regular sound", synonyms: []},
            {en: "recall", ja: "ï½ã‚’æ€ã„å‡ºã™", def: "to remember from past", synonyms: ["remember"]},
            {en: "mystery", ja: "ç¥ç§˜çš„ãªã“ã¨ï¼Œä¸å¯è§£ãªã“ã¨", def: "something difficult to understand", synonyms: []},
            {en: "depth", ja: "æ·±ã•", def: "distance from top to bottom", synonyms: []},
            {en: "vocabulary", ja: "èªå½™", def: "all words someone knows", synonyms: []},
            {en: "professor", ja: "æ•™æˆ", def: "highest rank university teacher", synonyms: []},
            {en: "nonfiction", ja: "ãƒãƒ³ãƒ•ã‚£ã‚¯ã‚·ãƒ§ãƒ³", def: "books about real facts", synonyms: []},
            {en: "Brazilian", ja: "ãƒ–ãƒ©ã‚¸ãƒ«ï¼ˆäººï¼‰ã®", def: "relating to Brazil", synonyms: []},
            {en: "combine", ja: "çµåˆã™ã‚‹ï¼Œçµã³ã¤ã", def: "to mix or join together", synonyms: []},
            {en: "reader", ja: "èª­è€…", def: "someone who reads", synonyms: []},
            {en: "mood", ja: "æ°—åˆ†", def: "way you feel", synonyms: []},
            {en: "inner", ja: "å†…ã®ï¼Œå†…éƒ¨ã®", def: "on the inside", synonyms: []}
        ];

        const phrasesData = [
            {en: "spend A (in) doing", ja: "ï½ã—ã¦ï¼¡ã‚’éã”ã™", words: 4, synonyms: []},
            {en: "knock A unconscious", ja: "Aã‚’æ°—çµ¶ã•ã›ã‚‹", words: 3, synonyms: []},
            {en: "get away from A", ja: "Aã‹ã‚‰é›¢ã‚Œã‚‹ï¼Œé€ƒã’ã‚‹", words: 4, synonyms: ["escape from A"]},
            {en: "as soon as possible", ja: "ã§ãã‚‹ã ã‘æ—©ã", words: 4, synonyms: ["ASAP"]},
            {en: "manage to do", ja: "ãªã‚“ã¨ã‹ï½ã™ã‚‹", words: 3, synonyms: ["succeed in doing"]},
            {en: "only to do", ja: "çµå±€ãŸã ï½ã™ã‚‹çµæœã¨ãªã‚‹", words: 3, synonyms: []},
            {en: "suffer from A", ja: "Aã«è‹¦ã—ã‚€", words: 3, synonyms: []},
            {en: "in public", ja: "äººå‰ã§", words: 2, synonyms: []},
            {en: "give a speech", ja: "æ¼”èª¬ã‚’ã™ã‚‹", words: 3, synonyms: ["make a speech"]},
            {en: "believe in A", ja: "ï¼¡ã®ä¾¡å€¤ï¼»æ­£ã—ã•ï¼½ã‚’ä¿¡ã˜ã‚‹", words: 3, synonyms: []},
            {en: "do one's duty", ja: "ç¾©å‹™ã‚’æœãŸã™", words: 3, synonyms: []},
            {en: "pass away", ja: "äº¡ããªã‚‹", words: 2, synonyms: ["die"]},
            {en: "go crazy", ja: "å¤¢ä¸­ã«ãªã‚‹ï¼Œç†±ç‹‚ã™ã‚‹", words: 2, synonyms: ["get really excited"]},
            {en: "dream of A", ja: "Aã‚’å¤¢è¦‹ã‚‹", words: 3, synonyms: ["dream about A"]},
            {en: "make a call", ja: "åˆ¤å®šã‚’ä¸‹ã™", words: 3, synonyms: []},
            {en: "spread out A", ja: "ï¼¡ã‚’åºƒã’ã‚‹", words: 3, synonyms: ["spread A out"]},
            {en: "say A to oneself", ja: "ã²ã¨ã‚Šã”ã¨ã§Aã¨è¨€ã†", words: 4, synonyms: []},
            {en: "do nothing but do", ja: "ãŸã ï½ã™ã‚‹ã ã‘ã§ã‚ã‚‹", words: 4, synonyms: ["only do"]},
            {en: "cannot stop doing", ja: "ï½ã›ãšã«ã¯ã„ã‚‰ã‚Œãªã„", words: 3, synonyms: ["can't stop doing"]},
            {en: "dozens of A", ja: "ä½•ãƒ€ãƒ¼ã‚¹ã‚‚ã®Aï¼Œå¤šæ•°ã®A", words: 3, synonyms: []},
            {en: "on the other side of A", ja: "Aã®åå¯¾å´ã«", words: 6, synonyms: []},
            {en: "by oneself", ja: "è‡ªåˆ†è‡ªèº«ã§", words: 2, synonyms: ["alone"]},
            {en: "with tears", ja: "ï¼ˆç›®ã«ï¼‰æ¶™ã‚’ãŸã‚ã¦", words: 2, synonyms: ["with tears in one's eyes"]},
            {en: "my God", ja: "ã‚ã‚å›°ã£ãŸï¼Œå¤§å¤‰ã ", words: 2, synonyms: ["oh my God"]},
            {en: "back and forth", ja: "å‰å¾Œã«", words: 3, synonyms: []},
            {en: "give A a hug", ja: "ï¼¡ã‚’æŠ±æ“ã™ã‚‹", words: 4, synonyms: ["hug A"]},
            {en: "instead of A", ja: "Aã®ä»£ã‚ã‚Šã«", words: 3, synonyms: []},
            {en: "shake hands", ja: "æ¡æ‰‹ã‚’ã™ã‚‹", words: 2, synonyms: ["shake hands with A"]},
            {en: "run down", ja: "æµã‚Œè½ã¡ã‚‹", words: 2, synonyms: []},
            {en: "in the middle of A", ja: "Aã®çœŸã£ãŸã ä¸­ã§", words: 5, synonyms: []},
            {en: "begin with A", ja: "Aã‹ã‚‰å§‹ã¾ã‚‹", words: 3, synonyms: ["start with A"]},
            {en: "go well", ja: "ã†ã¾ãã„ã", words: 2, synonyms: []},
            {en: "ever so", ja: "å®Ÿã«ï¼Œå¤§å¤‰", words: 2, synonyms: ["very"]},
            {en: "become friends with A", ja: "Aã¨å‹é”ã«ãªã‚‹", words: 4, synonyms: ["get along well with A"]},
            {en: "come across", ja: "ä¼ã‚ã‚‹ï¼Œç†è§£ã•ã‚Œã‚‹", words: 2, synonyms: ["be easy to understand"]},
            {en: "bring together A", ja: "Aã‚’çµã³ã¤ã‘ã‚‹ï¼Œè¦ªã—ãã•ã›ã‚‹", words: 3, synonyms: ["bring A together"]}
        ];

        // Google Formsã®è¨­å®š
        const GOOGLE_FORM_URL = 'https://docs.google.com/forms/d/e/1FAIpQLSenJUvgmrF4UXEocW877Awvp5mpCQ-amome_sQw5uT7x_W5Jw/formResponse';
        
        // ãƒ•ã‚©ãƒ¼ãƒ ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ID
        let FORM_FIELD_IDS = {
            name: 'entry.1732792071',      // åå‰
            score: 'entry.536464528',      // ã‚¹ã‚³ã‚¢
            correct: 'entry.2006245073',   // æ­£è§£æ•°
            total: 'entry.1318216277',     // ç·å•é¡Œæ•°
            time: 'entry.204148755'        // æ™‚é–“ï¼ˆç§’ï¼‰
        };

        // Google Formã«é€ä¿¡ï¼ˆiframeæ–¹å¼ï¼‰
        function submitToGoogleForm(data) {
            return new Promise((resolve) => {
                // éš ã—iframeã‚’ä½œæˆ
                const iframe = document.createElement('iframe');
                iframe.name = 'hidden_iframe';
                iframe.style.display = 'none';
                document.body.appendChild(iframe);

                // ãƒ•ã‚©ãƒ¼ãƒ ã‚’ä½œæˆ
                const form = document.createElement('form');
                form.method = 'POST';
                form.action = GOOGLE_FORM_URL;
                form.target = 'hidden_iframe';

                // ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ 
                for (const [key, fieldId] of Object.entries(FORM_FIELD_IDS)) {
                    const input = document.createElement('input');
                    input.type = 'hidden';
                    input.name = fieldId;
                    input.value = data[key] || '';
                    form.appendChild(input);
                }

                // ãƒ•ã‚©ãƒ¼ãƒ ã‚’bodyã«è¿½åŠ ã—ã¦é€ä¿¡
                document.body.appendChild(form);
                form.submit();

                // é€ä¿¡å¾Œã€å°‘ã—å¾…ã£ã¦ã‹ã‚‰ãƒ•ã‚©ãƒ¼ãƒ ã¨iframeã‚’å‰Šé™¤
                setTimeout(() => {
                    document.body.removeChild(form);
                    document.body.removeChild(iframe);
                    resolve(true);
                }, 1000);
            });
        }

        // ã‚²ãƒ¼ãƒ çŠ¶æ…‹
        let gameState = {
            mode: 'words',
            direction: 'ja-en',
            questionCount: 25,
            questions: [],
            currentIndex: 0,
            correctCount: 0,
            startTime: null,
            timerInterval: null,
            hintUsed: false
        };

        // ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ç”»é¢ã®ãƒœã‚¿ãƒ³å‡¦ç†
        document.querySelectorAll('.mode-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('selected'));
                this.classList.add('selected');
                gameState.mode = this.dataset.mode;
            });
        });

        document.querySelectorAll('.count-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.count-btn').forEach(b => b.classList.remove('selected'));
                this.classList.add('selected');
                gameState.questionCount = this.dataset.count;
            });
        });

        document.querySelectorAll('.direction-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.direction-btn').forEach(b => b.classList.remove('selected'));
                this.classList.add('selected');
                gameState.direction = this.dataset.direction;
            });
        });

        // ã‚²ãƒ¼ãƒ ã‚¹ã‚¿ãƒ¼ãƒˆ
        document.querySelector('.start-btn').addEventListener('click', startGame);

        function startGame() {
            // å•é¡Œãƒ‡ãƒ¼ã‚¿ã‚’æº–å‚™
            const data = gameState.mode === 'words' ? wordsData : phrasesData;
            const shuffled = [...data].sort(() => Math.random() - 0.5);
            
            // å‡ºé¡Œæ•°ã‚’æ±ºå®š
            if (gameState.questionCount === 'all') {
                gameState.questions = shuffled;
            } else {
                const count = parseInt(gameState.questionCount);
                gameState.questions = shuffled.slice(0, Math.min(count, shuffled.length));
            }
            
            gameState.currentIndex = 0;
            gameState.correctCount = 0;
            gameState.startTime = Date.now();

            // ç”»é¢åˆ‡ã‚Šæ›¿ãˆ
            document.querySelector('.setup-screen').classList.remove('active');
            document.querySelector('.game-screen').classList.add('active');

            // ã‚¿ã‚¤ãƒãƒ¼é–‹å§‹
            updateTimer();
            gameState.timerInterval = setInterval(updateTimer, 1000);

            // æœ€åˆã®å•é¡Œã‚’è¡¨ç¤º
            showQuestion();

            // å…¥åŠ›ãƒ•ã‚©ãƒ¼ã‚«ã‚¹
            document.querySelector('.answer-input').focus();
        }

        function showQuestion() {
            const question = gameState.questions[gameState.currentIndex];
            const questionNumber = gameState.currentIndex + 1;
            const totalQuestions = gameState.questions.length;

            // é€²æ—æ›´æ–°
            document.querySelector('.question-number').textContent = `å•é¡Œ ${questionNumber}`;
            document.querySelector('.progress').textContent = `${questionNumber}/${totalQuestions}`;
            document.querySelector('.correct-count').textContent = gameState.correctCount;
            
            const progressPercent = (questionNumber / totalQuestions) * 100;
            document.querySelector('.progress-fill').style.width = `${progressPercent}%`;

            // å•é¡Œè¡¨ç¤º
            if (gameState.direction === 'ja-en') {
                document.querySelector('.question-text').textContent = question.ja;
                let hintText = 'è‹±èªã§ç­”ãˆã¦ãã ã•ã„';
                if (gameState.mode === 'phrases' && question.words) {
                    hintText = `è‹±èªã§ç­”ãˆã¦ãã ã•ã„ï¼ˆ${question.words}èªï¼‰`;
                }
                document.querySelector('.question-hint').innerHTML = hintText;
            } else {
                document.querySelector('.question-text').textContent = question.en;
                document.querySelector('.question-hint').textContent = 'æ—¥æœ¬èªã§ç­”ãˆã¦ãã ã•ã„';
            }

            // å…¥åŠ›æ¬„ã¨ãƒ’ãƒ³ãƒˆã‚’ãƒªã‚»ãƒƒãƒˆ
            const input = document.querySelector('.answer-input');
            input.value = '';
            input.className = 'answer-input';
            document.querySelector('.feedback').textContent = '';
            document.querySelector('.feedback').className = 'feedback';
            document.querySelector('.hint-box').classList.remove('visible');
            gameState.hintUsed = false;
        }

        // ãƒ’ãƒ³ãƒˆãƒœã‚¿ãƒ³
        document.querySelector('.hint-btn').addEventListener('click', function() {
            if (gameState.hintUsed) return;
            
            const question = gameState.questions[gameState.currentIndex];
            const hintBox = document.querySelector('.hint-box');
            const hintText = document.querySelector('.hint-text');
            
            if (gameState.direction === 'ja-en') {
                // è‹±èªâ†’å®šç¾©ã¨æœ€åˆã®æ–‡å­—
                const firstLetter = question.en.charAt(0).toUpperCase();
                const definition = question.def || '';
                hintText.innerHTML = `ğŸ’¡ æœ€åˆã®æ–‡å­—: <strong>${firstLetter}</strong><br>å®šç¾©: ${definition}`;
            } else {
                // æ—¥æœ¬èªâ†’æœ€åˆã®æ–‡å­—
                const firstChar = question.ja.charAt(0);
                hintText.innerHTML = `ğŸ’¡ æœ€åˆã®æ–‡å­—: <strong>${firstChar}</strong>`;
            }
            
            hintBox.classList.add('visible');
            gameState.hintUsed = true;
        });

        // ç­”ãˆã®å…¥åŠ›å‡¦ç†
        document.querySelector('.answer-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkAnswer();
            }
        });

        function checkAnswer() {
            const input = document.querySelector('.answer-input');
            const userAnswer = input.value.trim().toLowerCase();
            const question = gameState.questions[gameState.currentIndex];
            
            let correctAnswers = [];
            if (gameState.direction === 'ja-en') {
                correctAnswers.push(question.en.toLowerCase());
                if (question.synonyms && question.synonyms.length > 0) {
                    correctAnswers.push(...question.synonyms.map(s => s.toLowerCase()));
                }
            } else {
                correctAnswers.push(question.ja.toLowerCase());
            }

            const feedback = document.querySelector('.feedback');
            const isCorrect = correctAnswers.some(answer => answer === userAnswer);

            if (isCorrect) {
                // æ­£è§£
                input.classList.add('correct');
                feedback.textContent = 'âœ“ æ­£è§£ï¼';
                feedback.classList.add('correct');
                gameState.correctCount++;
                
                setTimeout(() => {
                    gameState.currentIndex++;
                    if (gameState.currentIndex < gameState.questions.length) {
                        showQuestion();
                    } else {
                        endGame();
                    }
                }, 800);
            } else {
                // ä¸æ­£è§£
                input.classList.add('incorrect');
                let correctDisplay = gameState.direction === 'ja-en' ? question.en : question.ja;
                if (gameState.direction === 'ja-en' && question.synonyms && question.synonyms.length > 0) {
                    correctDisplay += ` (é¡ç¾©èª: ${question.synonyms.join(', ')})`;
                }
                feedback.textContent = `âœ— ä¸æ­£è§£ï¼æ­£è§£: ${correctDisplay}`;
                feedback.classList.add('incorrect');
                
                setTimeout(() => {
                    gameState.currentIndex++;
                    if (gameState.currentIndex < gameState.questions.length) {
                        showQuestion();
                    } else {
                        endGame();
                    }
                }, 2000);
            }
        }

        function updateTimer() {
            const elapsed = Date.now() - gameState.startTime;
            const seconds = Math.floor(elapsed / 1000);
            const minutes = Math.floor(seconds / 60);
            const displaySeconds = seconds % 60;
            
            const timeString = `${String(minutes).padStart(2, '0')}:${String(displaySeconds).padStart(2, '0')}`;
            document.querySelector('.timer').textContent = timeString;
        }

        function endGame() {
            clearInterval(gameState.timerInterval);
            
            const totalTime = Date.now() - gameState.startTime;
            const seconds = Math.floor(totalTime / 1000);
            const minutes = Math.floor(seconds / 60);
            const displaySeconds = seconds % 60;
            
            const timeString = `${String(minutes).padStart(2, '0')}:${String(displaySeconds).padStart(2, '0')}`;
            const totalQuestions = gameState.questions.length;
            const accuracy = Math.round((gameState.correctCount / totalQuestions) * 100);
            const avgTime = (seconds / totalQuestions).toFixed(1);
            
            // ã‚¹ã‚³ã‚¢è¨ˆç®—: (æ­£è§£æ•° Ã— 100) - çµŒéç§’æ•°
            const score = (gameState.correctCount * 100) - seconds;

            // çµæœç”»é¢ã«å€¤ã‚’è¨­å®š
            document.querySelector('.result-time').textContent = timeString;
            document.querySelector('.score-number').textContent = score;
            document.querySelector('.total-questions').textContent = totalQuestions;
            document.querySelector('.final-correct').textContent = gameState.correctCount;
            document.querySelector('.accuracy').textContent = `${accuracy}%`;
            document.querySelector('.avg-time').textContent = `${avgTime}ç§’`;
            
            // ã‚¹ã‚³ã‚¢ã‚’ä¸€æ™‚ä¿å­˜
            gameState.finalScore = score;
            gameState.finalTime = seconds;

            // ç”»é¢åˆ‡ã‚Šæ›¿ãˆ
            document.querySelector('.game-screen').classList.remove('active');
            document.querySelector('.result-screen').classList.add('active');
        }

        // ã‚¹ã‚³ã‚¢é€ä¿¡æ©Ÿèƒ½
        document.querySelector('.save-score-btn').addEventListener('click', async function() {
            const nameInput = document.querySelector('.name-input');
            const name = nameInput.value.trim();
            
            if (!name) {
                alert('åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }
            
            // ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
            this.disabled = true;
            this.textContent = 'é€ä¿¡ä¸­...';
            
            // é€ä¿¡ãƒ‡ãƒ¼ã‚¿ä½œæˆ
            const submitData = {
                name: name,
                score: gameState.finalScore.toString(),
                correct: gameState.correctCount.toString(),
                total: gameState.questions.length.toString(),
                time: gameState.finalTime.toString()
            };
            
            // Google Formã«é€ä¿¡
            const success = await submitToGoogleForm(submitData);
            
            // é€ä¿¡å®Œäº†è¡¨ç¤º
            document.querySelector('.name-input-section').style.display = 'none';
            document.querySelector('.qr-section').style.display = 'block';
            
            const qrSection = document.querySelector('.qr-section');
            qrSection.innerHTML = `
                <h3 style="color: #48bb78; margin-bottom: 20px;">âœ… é€ä¿¡å®Œäº†ï¼</h3>
                <div style="font-size: 18px; color: #333; margin-bottom: 10px;">
                    <strong>${name}</strong>ã•ã‚“ã®çµæœã‚’è¨˜éŒ²ã—ã¾ã—ãŸ
                </div>
                <div style="background: white; padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <div style="font-size: 16px; color: #667eea; margin-bottom: 10px;">ã‚ãªãŸã®ã‚¹ã‚³ã‚¢</div>
                    <div style="font-size: 48px; font-weight: bold; color: #667eea;">${gameState.finalScore}</div>
                    <div style="font-size: 14px; color: #718096; margin-top: 10px;">
                        æ­£è§£æ•°: ${gameState.correctCount}/${gameState.questions.length}
                    </div>
                </div>
                <p style="color: #718096; font-size: 14px;">
                    å…ˆç”Ÿã®ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«è‡ªå‹•ã§è¨˜éŒ²ã•ã‚Œã¾ã—ãŸ
                </p>
            `;
            
            this.textContent = 'âœ… é€ä¿¡å®Œäº†';
        });

        // ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆè¡¨ç¤º
        document.querySelector('.view-spreadsheet-btn').addEventListener('click', function() {
            const spreadsheetUrl = 'https://docs.google.com/forms/d/1FAIpQLSenJUvgmrF4UXEocW877Awvp5mpCQ-amome_sQw5uT7x_W5Jw/edit#responses';
            window.open(spreadsheetUrl, '_blank');
        });
    </script>
</body>
</html>
